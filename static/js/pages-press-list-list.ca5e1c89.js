(self["webpackChunkpress_ui_demo_vue2"]=self["webpackChunkpress_ui_demo_vue2"]||[]).push([[2733],{54453:function(t,e,i){var l=i(24301);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[t.id,l,""]]),l.locals&&(t.exports=l.locals);var n=i(34161).A;n("56bbe322",l,!0,{sourceMap:!1,shadowMode:!1})},40347:function(t,e,i){var l=i(49619);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[t.id,l,""]]),l.locals&&(t.exports=l.locals);var n=i(34161).A;n("036fc6fa",l,!0,{sourceMap:!1,shadowMode:!1})},33837:function(t,e,i){"use strict";var l;i.r(e),i.d(e,{default:function(){return W}});var n,a,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"demo-wrap demo-wrap--gray demo-wrap--flex",class:t.listLocal.vertical?"":"demo-wrap--hor"},[i("demo-block",{attrs:{title:t.t("basicUsage"),"section-style":t.sectionStyle,"header-style":t.headerStyle}},[i("press-cell",{attrs:{title:t.t("custom"),"is-link":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onShowBasicPopupCell.apply(void 0,arguments)}}})],1),i("div",{staticClass:"demo-container"},[i("PressList",{attrs:{finished:t.finished,"immediate-check":t.immediateCheck,vertical:t.listLocal.vertical,"finished-text":"没有更多了","auto-check-scroller":t.listLocal.autoCheckScroller,"custom-style":t.listStyle},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.load.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"list__wrap",style:t.wrapStyle},[i("div",{style:t.hiddenUpPartStyle}),t._l(t.showingData,(function(e){return i("div",{key:e.value,staticClass:"list__item"},[t._v(t._s(e.label))])}))],2)])],1),i("PressPopupCell",{ref:t.FUNCTIONAL_ID_MAP.POPUP_CELL,attrs:{id:t.FUNCTIONAL_ID_MAP.POPUP_CELL,mode:"functional"}}),i("PressPicker",{ref:t.FUNCTIONAL_ID_MAP.PICKER,attrs:{id:t.FUNCTIONAL_ID_MAP.PICKER,mode:"functional"}})],1)},c=[],s=i(98196),r=i(87458),u=(i(60989),i(59433),i(83603),i(20767),i(62980),i(36389),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-scroll-view",{class:t.scrollViewClass,style:t.scrollViewStyle,attrs:{id:t.SCROLL_VIEW_ID,"scroll-y":t.vertical,"scroll-x":!t.vertical,"scroll-with-animation":t.scrollWithAnimation,"scroll-anchoring":t.scrollAnchoring,enhanced:t.enhanced,"enable-flex":t.enableFlex,"enable-passive":t.enablePassive,"lower-threshold":t.offset,"scroll-into-view":t.scrollToElementById,"scroll-top":t.scrollTop,"scroll-left":t.scrollLeft},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrollToLower.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[i("div",{staticClass:"press-list__layout"},[t._t("default"),t.innerLoading?t._t("loading",[i("div",{staticClass:"press-list__loading",style:t.loadingStyle},[i("PressLoadingPlus",{attrs:{vertical:!t.vertical,size:t.loadingSize}},[t._v(t._s(t.loadingText))])],1)]):t._e(),t.finishedText&&t.finished?t._t("finished",[i("div",{staticClass:"press-list__finished",style:t.finishedStyle},[i("div",[t._v(t._s(t.finishedText))])])]):t._e(),i("div",{staticClass:"press-list__placeholder"})],2)])}),h=[],d=(i(26527),i(77020),i(90054)),f=i(17435),p=i(29571),v=i(39396),g="scrollViewId",m=i(87145),y=i(71915),_=i(45667),S=i(50508),C=(0,v.JP)(g),x={name:"PressList",options:(0,r.A)({},d.KQ),components:{PressLoadingPlus:f.A},mixins:[m.VP,(0,_.x)((function(t){this.autoCheckScroller&&(this.scroller||(this.scroller=(0,v.Rm)(this.$el)),t(this.scroller,"scroll",this.onScroll,!0),t(this.scroller,"touchmove",this.onScroll,!0),this.onScroll())})),S.G],props:(0,r.A)((0,r.A)({offset:{type:[Number,String],default:50},finished:{type:Boolean,default:!1},finishedText:{type:String,default:""},loadingText:{type:String,default:"加载中..."},immediateCheck:{type:Boolean,default:!0},enableFlex:{type:Boolean,default:!1},enhanced:{type:Boolean,default:!1},scrollWithAnimation:{type:Boolean,default:!1},enablePassive:{type:Boolean,default:!1},scrollAnchoring:{type:Boolean,default:!1},scrollToElementById:{type:String,default:""},vertical:{type:Boolean,default:!0},loadingStyle:{type:String,default:""},loadingSize:{type:String,default:"20px"},finishedStyle:{type:String,default:""},autoCheckScroller:{type:Boolean,default:!1},scrollLeft:{type:[Number,String],default:0},scrollTop:{type:[Number,String],default:0}},d.Gs),{},{customStyle:{type:String,default:""}}),emits:["scroll","input","load","update:modelValue"],data:function(){return{innerLoading:this.realModelValue,SCROLL_VIEW_ID:g,scrollerHeight:0}},computed:{scrollViewClass:function(){return["press-list",this.vertical?"press-list--vertical":"press-list--hor",this.customClass].join(" ")},scrollViewStyle:function(){return"height: 100%; ".concat(this.customStyle,";")}},watch:{realModelValue:{handler:function(t){this.innerLoading=t,this.check()}},finished:"check"},mounted:function(){this.immediateCheck&&this.check()},updated:function(){},methods:{getScrollerHeight:function(){var t=this;this.scrollerHeight||(0,p.l)(this,C).then((function(e){t.scrollerHeight=e.height}))},scroll:function(t){this.getScrollerHeight(),this.$emit("scroll",t,this.scrollerHeight),this.check()},scrollToLower:function(){this.emitInput()},emitInput:function(){this.innerLoading||this.finished||(this.innerLoading=!0,this.emitModelValue(!0),this.$emit("load"))},check:function(){var t=this;(0,y.dY)((function(){t.innerCheck()}))},innerCheck:function(){this.autoCheckScroller||this.commonCheck()},commonCheck:function(t){var e=this,i=this.offset;this.innerLoading||this.finished||Promise.all([(0,p.l)(this,".press-list__placeholder"),(0,p.l)(this,C)]).then((function(l){var n=l[0],a=l[1];if(void 0===t&&(t=a),!e.innerLoading&&!e.finished){var o=t.bottom-t.top;if(o){var c=n.bottom-t.bottom;e.vertical||(c=n.right-t.right);var s=c<=i;s&&e.emitInput()}}})).catch((function(){})).finally((function(){}))},onScroll:function(){var t,e=this.scroller,i=this.autoCheckScroller;i&&(null!==e&&void 0!==e&&e.getBoundingClientRect&&(t=e.getBoundingClientRect()),this.commonCheck(t))}}},L=x,k=(i(40347),i(13955)),A=(0,k.A)(L,u,h,!1,null,"2afda645",null,!1,n,a),b=A.exports,P=i(17228),w=i(71087),D=i(17425),I=i(31616),T=(i(30381),i(91911),{pageSize:20,total:300,delay:200,vertical:!0,autoCheckScroller:!0}),M=Array.from({length:5}).map((function(t,e){return Math.pow(10,e)})).reduce((function(t,e){for(var i=1;i<10;i++)t.push(e*i);return t}),[]).map((function(t){return{label:t,value:t}})),V=M.reduce((function(t,e){return t[e.value]=e.label,t}),{}),z=Array.from({length:1e3}).map((function(t,e){return{label:"".concat(100*(e+1),"ms"),value:100*(e+1)}})),B=z.reduce((function(t,e){return t[e.value]=e.label,t}),{});function E(t){var e=t.context,i=t.callback;(0,I.Rc)({context:e,title:"自定义设置",closeIcon:!0,cellList:[{label:"每次加载数量",value:V[T.pageSize],click:function(t){var l=t.context;l.closeDialog(),(0,I.u1)({title:"每次加载数量",closeIcon:!0,list:M,current:{value:T.pageSize},context:e}).then((function(t){var l=t.item;T.pageSize=l.value,e.onGTip("设置成功"),"function"===typeof i.changePageSize&&i.changePageSize.call(e,l.value)})).catch((function(){}))}},{label:"列表总数",value:V[T.total],click:function(t){var l=t.context;l.closeDialog(),(0,I.u1)({title:"列表总数",closeIcon:!0,list:M,current:{value:T.total},context:e}).then((function(t){var l=t.item;T.total=l.value,e.onGTip("设置成功"),"function"===typeof i.changeTotal&&i.changeTotal.call(e,l.value)})).catch((function(){}))}},{label:"数据请求时间",value:B[T.delay],click:function(t){var l=t.context;l.closeDialog(),(0,I.u1)({title:"数据请求时间",closeIcon:!0,list:z,current:{value:T.delay},context:e}).then((function(t){var l=t.item;T.delay=l.value,e.onGTip("设置成功"),"function"===typeof i.changeDelay&&i.changeDelay.call(e,l.value)})).catch((function(){}))}},{label:"是否竖向滚动",type:"switch",open:T.vertical,click:function(t){var l=t.context;l.closeDialog(),T.vertical=!T.vertical,e.onGTip("设置成功"),"function"===typeof i.changeDirection&&i.changeDirection.call(e,T.vertical)}},{label:"自动检测 Scroller",type:"switch",open:T.autoCheckScroller,click:function(t){var l=t.context;l.closeDialog(),T.autoCheckScroller=!T.autoCheckScroller,"function"===typeof i.changeAutoCheckScroller&&i.changeAutoCheckScroller.call(e,T.autoCheckScroller)}}]})}var N=i(11529),U=50,F=500,O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return{data:function(){return{currentIndex:0,useVirtualList:!0}},computed:{upMissed:function(){var e=this.currentIndex;return Math.max(0,e-t)},showingData:function(){var e=this.currentIndex,i=this.upMissed,l=this.list,n=this.useVirtualList;return n?l.slice(i,e+t).map((function(t,e){return(0,r.A)((0,r.A)({},t),{},{uniqueKey:e+i})})):l},hiddenUpPartStyle:function(){var t=this.upMissed,e=this.useVirtualList;if(!e)return"";var i="height: ".concat(t*U,"px;");return i},wrapStyle:function(){var t=this.list,e=this.useVirtualList;return e?"height: ".concat(t.length*U,"px;"):""}},methods:{updateCurrentIndex:function(t,e){var i=(0,N.YV)(t),l=i.scrollTop,n=i.scrollHeight;if(!(l<0)&&!(e+l>n)){var a=Math.round(l/U);this.currentIndex=a}}}}},R=i(12627)["A"];function $(t){var e=t.length,i=t.delay,l=t.beforeLength;return new Promise((function(t){setTimeout((function(){t({data:Array.from({length:e}).map((function(t,e){var i=e+l+1;return i<10&&(i="0".concat(i)),{label:i,value:i}}))})}),i||0)}))}var H,G={i18n:{"zh-CN":{custom:"自定义"},"en-US":{custom:"Custom"}},components:{PressList:b,PressPopupCell:P.A,PressPicker:w.A,PressCell:D.A},mixins:[O()],data:function(){var t=(0,r.A)({},T),e="";return{sectionStyle:"margin: 0;background: #f7f8fa;",headerStyle:"background: #f7f8fa;",loading:!1,finished:!1,immediateCheck:!0,list:[],FUNCTIONAL_ID_MAP:I.nB,listLocal:t,listStyle:e}},computed:{},watch:{listLocal:{handler:function(t){t.vertical||(this.useVirtualList=!1)},deep:!0}},mounted:function(){},methods:{load:function(){R.log("[load]"),this.onFetchData()},scroll:function(t,e){this.updateCurrentIndex(t,e)},onFetchData:function(t){var e,i=this,l=this.listLocal,n=l.total,a=l.pageSize,o=l.delay;$({delay:o,length:a,beforeLength:t?0:(null===(e=this.list)||void 0===e?void 0:e.length)||0}).then((function(e){var l=e.data,a=t?l:[].concat((0,s.A)(i.list),(0,s.A)(l));a.length>n&&(a=a.slice(0,n)),i.list=a,R.log("[current total]",a.length),i.loading=!1,i.finished=i.list.length>=n})).catch((function(){}))},onShowBasicPopupCell:function(){E({context:this,callback:{changeTotal:this.changeTotal,changePageSize:this.changePageSize,changeDelay:this.changeDelay,changeDirection:this.changeDirection,changeAutoCheckScroller:this.changeAutoCheckScroller}})},changePageSize:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{pageSize:t}),this.generateData()},changeTotal:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{total:t}),this.generateData()},changeDelay:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{delay:t}),this.generateData()},changeDirection:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{vertical:t}),this.generateData()},changeAutoCheckScroller:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{autoCheckScroller:t}),this.list=[],this.generateData()},generateData:function(){this.loading=!0,this.onFetchData(!0)}}},j=G,K=(i(54453),(0,k.A)(j,o,c,!1,null,"48f02c1c",null,!1,l,H)),W=K.exports},45667:function(t,e,i){"use strict";i.d(e,{x:function(){return a}});var l=i(97229),n=0;function a(t){var e="binded_".concat(n);function i(){var i=this;i[e]||(t.call(i,l.on,!0),i[e]=!0)}function a(){var i=this;i[e]&&(t.call(i,l.AU,!1),i[e]=!1)}return n+=1,{mounted:i,activated:i,deactivated:a,beforeDestroy:a}}},11529:function(t,e,i){"use strict";i.d(e,{YV:function(){return n}});i(91672);var l=i(74007);i(60635);function n(t){var e,i,n;return(0,l.n1)()?{value:(null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.value)||"",scrollTop:null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.scrollTop,scrollHeight:null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.scrollHeight}:t.detail}},60635:function(t,e,i){"use strict";i.d(e,{FX:function(){return o}});i(10866);var l=!1;try{var n={};Object.defineProperty(n,"passive",{get:function(){return l=!0,!0}}),window.addEventListener("test-passive",(function(){}),n)}catch(c){}var a=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!!l&&{passive:t}},o=a()},24301:function(t,e,i){"use strict";i.r(e);var l=i(9157),n=i.n(l),a=i(82294),o=i.n(a),c=o()(n());c.push([t.id,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.demo-container[data-v-48f02c1c]{flex:1;margin-top:6px;overflow:auto}.demo-wrap--hor .list__wrap[data-v-48f02c1c]{display:flex;height:100%}.demo-wrap--hor .list__item[data-v-48f02c1c]{min-width:100px;border-right:1px solid #f5f6fa;height:100%}.list__item[data-v-48f02c1c]{width:100%;height:50px;display:flex;align-items:center;justify-content:center;border-bottom:1px solid #f5f6fa;background:#fff;font-size:16px;box-sizing:border-box}',""]),e["default"]=c},49619:function(t,e,i){"use strict";i.r(e);var l=i(9157),n=i.n(l),a=i(82294),o=i.n(a),c=o()(n());c.push([t.id,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.press-list--hor[data-v-2afda645]  .press-list__layout{height:100%;display:flex}.press-list--hor .press-list__loading[data-v-2afda645],\n.press-list--hor .press-list__finished[data-v-2afda645]{min-width:100px;height:100%}.press-list__loading[data-v-2afda645],\n.press-list__finished[data-v-2afda645]{width:100%;height:50px;display:flex;align-items:center;justify-content:center;color:#969799;font-size:14px}.press-list__placeholder[data-v-2afda645]{height:0;pointer-events:none}',""]),e["default"]=c}}]);